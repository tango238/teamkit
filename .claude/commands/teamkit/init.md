---
description: Create requirements specifications from user conversation
role: Requirements analyst and specification writer
task: Gather application requirements through conversation and create feature-based README.md files
constraints:
  - Ask clarifying questions before creating specifications
  - Create specifications in Japanese
  - Follow consistent format across all feature READMEs
output_format: Feature-based README.md files in specs/ directory
allowed-tools:
  - Bash
  - Read
  - Write
  - Edit
  - Grep
  - Glob
  - AskUserQuestion
argument-hint: <appName> [-o|--output <outputDir>]
---

# Setup

1. **Set `commandName`**: `init`
2. **Set `baseDir`**: `specs`
3. **Get `appName`**: Read the first argument passed to the slash command.
    - If no argument is provided, display the error message: "Error: `appName` argument is required. Usage: `/teamkit:init <appName> [-o|--output <outputDir>]`" and **STOP** execution immediately.
4. **Check for output directory**: Check if `-o` or `--output` option is passed as any argument.
    - If found, set `outputDir` to the value of the option.
    - If not found, set `outputDir` to `{{baseDir}}`.


# 目的

ユーザーとの会話を通じてアプリケーションの要件を聞き出し、機能別のREADME.mdファイルを`{{outputDir}}/`配下に作成する。


# ツール使用ルール

- **ファイル存在確認**: `Glob` ツールを使用する（`Bash(test -f)` は使用しない）
- **ファイル読み込み**: `Read` ツールを使用する
- **ファイル編集**: `Edit` ツールを使用する
- **ファイル作成**: `Write` ツールを使用する
- **ファイル検索**: `Grep` または `Glob` ツールを使用する
- **ディレクトリ作成**: `Bash(mkdir)` を使用する
- **ユーザーへの質問**: `AskUserQuestion` ツールを使用する


# Execution Step

## 1. 初期設定

- `{{outputDir}}` フォルダが存在するか確認する
  - 存在しない場合は作成する
- 開始メッセージを表示: 「{{appName}}の要件定義を開始します。いくつか質問させてください。」

## 2. 基本情報のヒアリング

以下の情報をユーザーから順番に聞き出す。各質問は `AskUserQuestion` ツールを使用する。

### 2.1 アプリケーション概要
```
このアプリケーションは何をするものですか？
簡単な説明をお願いします。
```

### 2.2 対象ユーザー
```
このアプリケーションを使うのは誰ですか？
（例：管理者、一般ユーザー、店舗スタッフなど）
複数ある場合はすべて教えてください。
```

### 2.3 ユーザー権限
```
ユーザーの種類ごとに権限の違いはありますか？
（例：管理者は全機能利用可能、一般ユーザーは閲覧のみ、など）
```

### 2.4 主要機能
```
このアプリケーションに必要な主要な機能を教えてください。
（例：商品管理、注文管理、レポート出力など）
```

### 2.5 各機能の詳細
主要機能ごとに以下を確認する:
```
「{{機能名}}」機能について詳しく教えてください:
1. この機能で管理するデータは何ですか？（名前、日付、ステータスなど）
2. どんな画面が必要ですか？（一覧、詳細、登録/編集など）
3. ユーザーはこの機能で何ができますか？（CRUD操作、検索、フィルタなど）
```

### 2.6 技術要件（オプション）
```
技術的な要件はありますか？
（例：Webアプリ、モバイル対応、認証方式、外部連携など）
特にない場合は「なし」とお答えください。
```

## 3. 要件の整理と確認

- ヒアリング内容を整理して、以下の構成でユーザーに確認する:

```markdown
## 確認: {{appName}}の要件

### 概要
{{アプリケーション概要}}

### 対象ユーザー
{{ユーザー種別と権限}}

### 主要機能
1. {{機能1}}
2. {{機能2}}
...

### ディレクトリ構成（予定）
{{outputDir}}/
├── README.md              # 全体概要
├── {{機能1-slug}}/
│   └── README.md
├── {{機能2-slug}}/
│   └── README.md
...
```

- ユーザーに確認:「この内容で要件定義書を作成してよろしいですか？」
  - 「はい」の場合 → Step 4へ進む
  - 「いいえ」の場合 → 修正点を確認し、Step 2に戻って該当部分を再ヒアリング

## 4. ディレクトリ構造の作成

- 各機能のディレクトリを作成する
- ディレクトリ名は機能名を英語のスラッグ形式に変換する
  - 例: 「チーム管理」→ `team-management`
  - 例: 「スケジュール管理」→ `schedule-management`
  - 例: 「ダッシュボード」→ `dashboard`

## 5. 全体概要README.mdの作成

`{{outputDir}}/README.md` を以下の形式で作成する:

```markdown
# {{appName}}

## 概要

{{アプリケーション概要}}

## 対象ユーザー

{{対象ユーザーの説明}}

## ユーザー種別

| 種別 | 役割 | 権限 |
|------|------|------|
| {{種別1}} | {{役割}} | {{権限}} |
| {{種別2}} | {{役割}} | {{権限}} |

## 主要機能一覧

| 機能 | 概要 | 詳細 |
|------|------|------|
| [{{機能1}}](./{{機能1-slug}}/README.md) | {{概要}} | {{説明}} |
| [{{機能2}}](./{{機能2-slug}}/README.md) | {{概要}} | {{説明}} |

## 技術要件

### プラットフォーム

{{プラットフォーム情報}}

### 非機能要件

| 項目 | 要件 |
|------|------|
| {{項目1}} | {{要件1}} |

## 画面遷移概要

```
{{画面遷移の概要をテキストで記述}}
```
```

## 6. 各機能README.mdの作成

各機能ディレクトリに `README.md` を以下の形式で作成する:

```markdown
# {{機能名}}機能

## 機能概要

{{機能の説明}}

## データ定義

### {{エンティティ名}}（{{Entity}}）

| 項目 | フィールド名 | 型 | 必須 | バリデーション | 備考 |
|------|-------------|-----|:----:|----------------|------|
| ID | id | UUID | ○ | 自動生成 | 一意識別子 |
| {{項目名}} | {{fieldName}} | {{type}} | {{必須}} | {{validation}} | {{備考}} |

## 画面一覧

### SC-{{機能コード}}-01: {{画面名}}

- **パス**: `/{{path}}`
- **アクセス権限**: {{権限}}

#### 表示内容

| 要素 | 説明 |
|------|------|
| {{要素1}} | {{説明}} |

#### 操作

| 操作 | アクション |
|------|----------|
| {{操作1}} | {{アクション}} |

## ユースケース

### UC-{{機能コード}}-01: {{ユースケース名}}

- **アクター**: {{アクター}}
- **事前条件**: {{事前条件}}

#### 基本フロー

1. {{ステップ1}}
2. {{ステップ2}}
3. {{ステップ3}}

#### 代替フロー

- **{{条件}}**
  1. {{代替ステップ1}}
  2. {{代替ステップ2}}
```

## 7. 作成内容のサマリー表示

すべてのファイル作成が完了したら、以下の内容をユーザーに報告する:

```markdown
## 要件定義書の作成が完了しました

### 作成されたファイル

{{outputDir}}/
├── README.md                    # 全体概要
├── {{機能1-slug}}/
│   └── README.md               # {{機能1}}
├── {{機能2-slug}}/
│   └── README.md               # {{機能2}}
...

### 次のステップ

各機能の要件定義書からfeature.ymlを生成するには、以下のコマンドを実行してください:

```bash
/teamkit:create-feature {{機能1-slug}}
/teamkit:create-feature {{機能2-slug}}
...
```

または、すべての機能を一括で処理する場合:

```bash
# 各機能ディレクトリに対して順番に実行
```
```


# Output Format

## 全体README.md 出力例

```markdown
# ECサイト管理システム

## 概要

オンラインショップの運営者向け管理システム。商品の登録・在庫管理から注文処理、顧客対応まで、EC運営に必要な機能を提供する。

## 対象ユーザー

- ECサイト運営者
- ショップ管理者
- カスタマーサポート担当者

## ユーザー種別

| 種別 | 役割 | 権限 |
|------|------|------|
| 管理者（admin） | システム管理、全体統括 | 全機能利用可能 |
| スタッフ（staff） | 日常業務 | 商品・注文管理、閲覧 |

## 主要機能一覧

| 機能 | 概要 | 詳細 |
|------|------|------|
| [商品管理](./product-management/README.md) | 商品の登録・編集・削除 | 在庫管理含む |
| [注文管理](./order-management/README.md) | 注文の処理・追跡 | 出荷・返品対応 |
| [顧客管理](./customer-management/README.md) | 顧客情報の管理 | 問い合わせ対応 |

## 技術要件

### プラットフォーム

- **種別**: Webアプリケーション
- **対応ブラウザ**: Chrome, Firefox, Safari, Edge（最新版）

### 非機能要件

| 項目 | 要件 |
|------|------|
| 認証 | メールアドレス + パスワード認証 |
| パフォーマンス | ページ読み込み3秒以内 |

## 画面遷移概要

```
ダッシュボード（/）
├── 商品管理（/products）
│   ├── 商品詳細（/products/:id）
│   └── 商品登録/編集（/products/new, /products/:id/edit）
├── 注文管理（/orders）
│   └── 注文詳細（/orders/:id）
└── 顧客管理（/customers）
    └── 顧客詳細（/customers/:id）
```
```

## 機能別README.md 出力例

```markdown
# 商品管理機能

## 機能概要

商品の登録・編集・削除および在庫管理を行う機能。カテゴリ分類と検索機能を提供。

## データ定義

### 商品情報（Product）

| 項目 | フィールド名 | 型 | 必須 | バリデーション | 備考 |
|------|-------------|-----|:----:|----------------|------|
| ID | id | UUID | ○ | 自動生成 | 一意識別子 |
| 商品名 | name | string | ○ | 1-100文字 | |
| 価格 | price | number | ○ | 0以上 | 税抜き |
| 在庫数 | stock | number | ○ | 0以上 | |
| カテゴリ | category | Category | ○ | カテゴリから選択 | |
| 説明 | description | text | - | 2000文字以内 | |
| 画像 | images | image[] | - | 各5MB以下 | 複数可 |
| ステータス | status | enum | ○ | draft/published/archived | |
| 作成日時 | createdAt | datetime | ○ | 自動設定 | |
| 更新日時 | updatedAt | datetime | ○ | 自動更新 | |

## 画面一覧

### SC-PM-01: 商品一覧画面

- **パス**: `/products`
- **アクセス権限**: 全員

#### 表示内容

| 要素 | 説明 |
|------|------|
| 商品テーブル | 商品名、価格、在庫数、ステータスを表示 |
| 検索バー | 商品名による絞り込み検索 |
| フィルタ | カテゴリ、ステータスによるフィルタリング |
| 追加ボタン | 新規商品登録画面への遷移 |

#### 操作

| 操作 | アクション |
|------|----------|
| 行クリック | 商品詳細画面へ遷移 |
| 追加ボタンクリック | 商品登録画面へ遷移 |

### SC-PM-02: 商品詳細画面

- **パス**: `/products/:id`
- **アクセス権限**: 全員

#### 表示内容

| 要素 | 説明 |
|------|------|
| 商品情報 | 全項目を表示 |
| 画像ギャラリー | 登録画像のサムネイル表示 |
| 編集ボタン | 編集画面への遷移 |
| 削除ボタン | 削除確認ダイアログ表示 |

### SC-PM-03: 商品登録/編集画面

- **パス**: `/products/new`, `/products/:id/edit`
- **アクセス権限**: 管理者、スタッフ

#### 入力項目

| 項目 | 入力形式 | バリデーション |
|------|---------|----------------|
| 商品名 | テキスト入力 | 必須、1-100文字 |
| 価格 | 数値入力 | 必須、0以上 |
| 在庫数 | 数値入力 | 必須、0以上 |
| カテゴリ | セレクトボックス | 必須 |
| 説明 | テキストエリア | 2000文字以内 |
| 画像 | ファイルアップロード | 各5MB以下 |
| ステータス | セレクトボックス | 必須 |

## ユースケース

### UC-PM-01: 商品を登録する

- **アクター**: 管理者、スタッフ
- **事前条件**: ログイン済み、カテゴリが1つ以上存在

#### 基本フロー

1. 一覧画面で「追加」ボタンをクリック
2. 登録画面でフォームに情報を入力
3. 「保存」ボタンをクリック
4. システムがバリデーションを実行
5. 登録完了、一覧画面に戻る

#### 代替フロー

- **4a. バリデーションエラー**
  1. エラーメッセージを該当フィールドに表示
  2. ユーザーは修正して再度保存

### UC-PM-02: 商品を編集する

- **アクター**: 管理者、スタッフ
- **事前条件**: 対象商品が存在

#### 基本フロー

1. 詳細画面で「編集」ボタンをクリック
2. 編集画面でフォームの情報を変更
3. 「保存」ボタンをクリック
4. システムがバリデーションを実行
5. 更新完了、詳細画面に戻る

### UC-PM-03: 商品を削除する

- **アクター**: 管理者
- **事前条件**: 対象商品が存在

#### 基本フロー

1. 詳細画面で「削除」ボタンをクリック
2. 確認ダイアログ「本当に削除しますか？」を表示
3. 「削除」ボタンをクリック
4. 削除完了、一覧画面に戻る

#### 代替フロー

- **3a. キャンセル**
  1. ダイアログを閉じる
  2. 詳細画面に留まる
```


# Notes

- **日本語出力**: すべてのメッセージとファイル内容は日本語で記述する
- **段階的ヒアリング**: 一度に多くの情報を求めず、段階的に質問する
- **確認プロセス**: 重要なポイントでユーザーに確認を取る
- **一貫性**: 全機能で同じフォーマットを使用する
- **スラッグ命名規則**: 機能名は英語のケバブケースに変換する
